@import "@repo/astro-tailwind/tailwindcss";

@variant dark (.dark &);

@theme {
  --color-border: hsl(0 0% 89.8%);
  --color-input: hsl(0 0% 89.8%);
  --color-ring: hsl(0 0% 3.9%);
  --color-background: hsl(0 0% 100%);
  --color-foreground: hsl(210 11.1% 3.53%);

  --color-primary: hsl(0 0% 9%);
  --color-primary-foreground: hsl(0 0% 98%);

  --color-secondary: hsl(0 0% 96.1%);
  --color-secondary-foreground: hsl(0 0% 9%);

  --color-destructive: hsl(0 84.2% 60.2%);
  --color-destructive-foreground: hsl(0 0% 98%);

  --color-muted: hsl(0 0% 96.1%);
  --color-muted-foreground: hsl(0 0% 45.1%);

  --color-accent: hsl(0 0% 96.1%);
  --color-accent-foreground: hsl(0 0% 9%);

  --color-popover: hsl(0 0% 100%);
  --color-popover-foreground: hsl(210 11.1% 3.53%);

  --color-card: hsl(0 0% 100%);
  --color-card-foreground: hsl(210 11.1% 3.53%);

  --radius: 0.5rem;
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 210 11.1% 3.53%;

    --card: 0 0% 100%;
    --card-foreground: 210 11.1% 3.53%;

    --popover: 0 0% 100%;
    --popover-foreground: 210 11.1% 3.53%;

    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;

    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;

    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;
    --muted-background: 0 0% 96.1%;

    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --ring: 0 0% 3.9%;

    --radius: 0.5rem;
  }

  .dark {
    --background: 210 11.1% 3.53%;
    --foreground: 0 0% 98%;

    --card: 0 0% 0% / 0;
    --card-foreground: 0 0% 98%;

    --popover: 210 11.1% 3.53%;
    --popover-foreground: 0 0% 98%;

    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;

    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;

    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;
    --muted-background: 0 0% 14.9%;

    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 83.1%;

    /* Override @theme colors for Tailwind v4 */
    --color-border: hsl(0 0% 14.9%);
    --color-input: hsl(0 0% 14.9%);
    --color-ring: hsl(0 0% 83.1%);
    --color-background: hsl(210 11.1% 3.53%);
    --color-foreground: hsl(0 0% 98%);

    --color-primary: hsl(0 0% 98%);
    --color-primary-foreground: hsl(0 0% 9%);

    --color-secondary: hsl(0 0% 14.9%);
    --color-secondary-foreground: hsl(0 0% 98%);

    --color-destructive: hsl(0 62.8% 30.6%);
    --color-destructive-foreground: hsl(0 0% 98%);

    --color-muted: hsl(0 0% 14.9%);
    --color-muted-foreground: hsl(0 0% 63.9%);

    --color-accent: hsl(0 0% 14.9%);
    --color-accent-foreground: hsl(0 0% 98%);

    --color-popover: hsl(210 11.1% 3.53%);
    --color-popover-foreground: hsl(0 0% 98%);

    --color-card: hsl(0 0% 0% / 0);
    --color-card-foreground: hsl(0 0% 98%);
  }
}

@keyframes gradient {
  0% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
  100% {
    background-position: 0% 50%;
  }
}

@layer base {
  * {
    border-color: hsl(var(--border));
  }

  html {
    margin: 0;
    padding: 0;
    width: 100%;
    min-height: 100%;
  }

  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    margin: 0;
    padding: 0;
    width: 100%;
    min-height: 100vh;
    min-height: 100dvh;
    overflow-x: hidden;
    overflow-y: auto;
  }

  html.dark {
    min-height: 100vh;
    min-height: 100dvh;
    background: hsl(210 11.1% 3.53%);
  }

  html.dark body {
    background: radial-gradient(
      ellipse at top,
      hsl(0deg 0% 13.49%),
      hsl(210 11.1% 3.53%)
    );
    background-attachment: fixed;
  }
}

@media (max-width: 768px) {
  body {
    display: flex;
    flex-direction: column;
  }
}

h3 code {
  font-size: 1.125rem !important;
}

@media (min-width: 768px) {
  h3 code {
    font-size: 1.25rem !important;
  }
}

pre {
  padding-left: 0 !important;
  padding-right: 0 !important;
  border-radius: 0.5rem;
  overflow-x: auto;
  padding-top: 1rem;
  padding-bottom: 1rem;
}

pre [data-line] {
  padding-left: 1rem;
  padding-right: 1rem;
}

code {
  font-size: 0.875rem;
  line-height: 2 !important;
}

@media (min-width: 768px) {
  code {
    font-size: 1rem;
  }
}

pre > code {
  counter-reset: line;
}

@page {
  margin: 0;
  size: auto;
}

@media print {
  * {
    animation-duration: 0s !important;
    animation-delay: 0s !important;
    transition-duration: 0s !important;
    transition-delay: 0s !important;
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
  }

  [style*="filter: blur"] {
    filter: none !important;
  }

  [style*="opacity: 0"] {
    opacity: 1 !important;
  }

  /* Hide Navbar in print mode - target the fixed positioned container */
  nav,
  [class*="navbar"],
  [class*="Navbar"],
  .fixed.bottom-0,
  [class*="fixed"][class*="bottom"] {
    display: none !important;
    visibility: hidden !important;
  }

  /* Force light theme colors in print mode */
  :root,
  .dark {
    --background: 0 0% 100% !important;
    --foreground: 210 11.1% 3.53% !important;
    --card: 0 0% 100% !important;
    --card-foreground: 210 11.1% 3.53% !important;
    --popover: 0 0% 100% !important;
    --popover-foreground: 210 11.1% 3.53% !important;
    --primary: 0 0% 9% !important;
    --primary-foreground: 0 0% 98% !important;
    --secondary: 0 0% 96.1% !important;
    --secondary-foreground: 0 0% 9% !important;
    --muted: 0 0% 96.1% !important;
    --muted-foreground: 0 0% 45.1% !important;
    --accent: 0 0% 96.1% !important;
    --accent-foreground: 0 0% 9% !important;
    --border: 0 0% 89.8% !important;
    --input: 0 0% 89.8% !important;
    --ring: 0 0% 3.9% !important;
  }

  /* Remove all background gradients and force white background everywhere */
  *,
  *::before,
  *::after,
  body,
  html {
    background: white !important;
    background-color: white !important;
    background-image: none !important;
  }

  /* Force all text to be dark colored in print mode */
  *,
  *::before,
  *::after,
  body,
  html,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  p,
  span,
  div,
  a,
  li,
  td,
  th,
  label,
  input,
  textarea,
  select {
    color: hsl(210 11.1% 3.53%) !important;
  }

  .dark,
  .dark *,
  .dark *::before,
  .dark *::after,
  .dark body,
  .dark html,
  .dark h1,
  .dark h2,
  .dark h3,
  .dark h4,
  .dark h5,
  .dark h6,
  .dark p,
  .dark span,
  .dark div,
  .dark a,
  .dark li,
  .dark td,
  .dark th,
  .dark label,
  .dark input,
  .dark textarea,
  .dark select {
    background: white !important;
    background-color: white !important;
    background-image: none !important;
    color: hsl(210 11.1% 3.53%) !important;
  }

  /* Fix for overlapping text in work experience section during print */
  [style*="height: 0"],
  [style*="opacity: 0"] {
    height: auto !important;
    opacity: 1 !important;
  }

  /* Ensure all motion divs are fully visible in print mode */
  div[style*="height"],
  div[style*="opacity"] {
    height: auto !important;
    opacity: 1 !important;
  }

  /* 아래 코드들은 pdf로 저장하기 할 때 레이아웃이 깨지는 것을 방지하기 위한 코드들입니다.
  필요할때 주석풀고 사용하고 다시 주석처리해야함 */
  /* Allow page breaks in work section but prevent in others */
  section:not(#work) {
    page-break-inside: avoid;
    break-inside: avoid;
  }

  /* Add top margin for work section when it starts on a new page (print only) */
  @media print {
    #work {
      margin-top: 2rem;
    }
  }

  /* Prevent page break between section title and content */
  h2 {
    page-break-after: avoid;
    break-after: avoid;
  }

  /* Prevent page break inside cards and after them */
  [class*="Card"],
  [class*="card"] {
    page-break-inside: avoid;
    break-inside: avoid;
    page-break-after: auto;
    break-after: auto;
  }

  /* Prevent orphaned section titles */
  section h2 {
    page-break-after: avoid;
    break-after: avoid;
  }

  /* Remove extra spacing in print */
  @media print {
    .border-t {
      display: none;
    }
  }
}
